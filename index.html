---
---
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
<section class="categories">
	{% assign categories = site.categories | sort %}
	{% for category in categories %}
		{% assign name = category[0] %}
		{% assign posts = category[1] %}
		{% assign size = posts | size %}
		<section class="category">
				<h3>
					{{ name | replace: "-", " " }}
				</h3>

			<ul>
				{% assign tutorials = posts | where: "type", "Document" | sort: "title"  %}
				{% for tutorial in tutorials limit: 15 %}
					<li><a href="{{ site.baseurl }}{{ tutorial.url }}">{% include document-icon.html icon=tutorial.type %}{{ tutorial.title }}</a></li>
				{% endfor %}
				
			</ul>
		</section>
	{% endfor %}

	
</section>
<div id="notification-bar" style="display:none; position:fixed; top:0; left:0; width:100%; background:#fffae6; border-bottom:1px solid #ffd700; padding:15px; z-index:9999;">
    <span id="notification-content"></span>
    <button id="notification-close" style="float:right; background:none; border:none; font-weight:bold; cursor:pointer;">âœ•</button>
</div>


{% assign recent_posts = "" | split: "" %}
{% assign categories = site.categories | sort %}
{% for category in categories %}
  {% assign posts = category[1] %}
  {% assign tutorials = posts | where: "type", "Document" %}
  {% for tutorial in tutorials %}
    {% if tutorial.date > site.time | date: "%s" | minus: 2592000 %}
      {% assign recent_posts = recent_posts | push: tutorial %}
    {% endif %}
  {% endfor %}
{% endfor %}

{% assign recent_posts = recent_posts | slice: 0,3 %}

<script>
  var recentPosts = [
    {% for post in recent_posts %}
      { "title": "{{ post.title | escape }}", "url": "{{ site.baseurl }}{{ post.url }}" }{% if forloop.last == false %},{% endif %}
    {% endfor %}
  ];
</script>


<script>
$(document).ready(function(){
    if(!Cookies.get('notification_seen')){
        if(recentPosts.length > 0){
            var html = '<ul style="margin:0; padding-left:20px;">';
            recentPosts.forEach(function(post){
                html += '<li><a href="'+post.url+'" style="text-decoration:none; color:#333;">'+post.title+'</a></li>';
            });
            html += '</ul>';
            $('#notification-content').html(html);
            $('#notification-bar').slideDown();
        }
    }

    $('#notification-close').click(function(){
        $('#notification-bar').slideUp();
        Cookies.set('notification_seen', 'yes', { expires: 30 });
    });
});
</script>
